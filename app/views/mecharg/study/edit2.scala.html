@(studyList: List[StudyModel], loggedInUser: UserModel, 
breadcrumbs: services.Breadcrumbs, messages: services.Messages,
submitAction: play.api.mvc.Call, form: Form[StudyModel])

@views.html.mecharg.main2(studyList, loggedInUser, breadcrumbs, messages){

@helper.form(action = submitAction, 'class -> "form-horizontal", 'role -> "form") {

<div class="form-group">
	<label class="control-label col-xs-2" for="title">Title:</label>
	<div class="col-xs-10">
		<input type="text" class="form-control" id="title" name="@StudyModel.TITLE" value="@form(StudyModel.TITLE).value" placeholder="Your title">
	</div>
</div>

<div class="form-group">
	<label class="control-label col-xs-2" for="description">Description:</label>
	<div class="col-xs-10">
		<textarea rows="3" class="form-control" id="description" name="@StudyModel.DESCRIPTION" placeholder="Your description">@form(StudyModel.DESCRIPTION).value</textarea>
		<span class="help-block">Explain what your study is doing. In case you want to use the Mechanical Turk, this description will be shown to the participants.</span>
	</div>
</div>

<div class="form-group">
	<label class="control-label col-xs-2" for="dirName">Study's directory name:</label>
	<div class="col-xs-10">
		<input type="text" class="form-control" id="dirName" name="@StudyModel.DIRNAME_PREFIX" value="@form(StudyModel.DIRNAME_PREFIX).value" placeholder="Study's directory name">
	<span class="help-block">Enter the name of the directory of your study in the file system of the OSA server. All HTML, JavaScript, CSS, and images goes in there. The actual directory name will get a suffix "_ID" with the ID of your study.</span>
	</div>
</div>

<div class="form-group">
	<label class="control-label col-xs-2" for="jsonData">JSON data:</label>
	<div class="col-xs-10">
		<textarea rows="6" class="form-control" id="jsonData" name="@StudyModel.JSON_DATA" placeholder="Put your JSON string here">@form(StudyModel.JSON_DATA).value</textarea>
		<span class="help-block">Your component scripts can ask for these data. If you need a larger field you can increase the size with the button in the bottom-right corner. You can also leave it empty if not needed.</span>
	</div>
</div>

<div class="form-group">
	<div class="col-xs-offset-2 col-xs-10">
		<input type="submit" class="btn btn-primary" value="Submit">
	</div>
</div>

<script>
@if(form.hasErrors) {
	showWarning("Study wasn't saved");
}
@for(error <- form.globalErrors) {
	showError("@error.message");
}
@for(error <- form(StudyModel.TITLE).errors) {
	$('#title').closest(".form-group").addClass("has-error");
	$('#title').after('<span class="help-block">@error.message</span>');
}
@for(error <- form(StudyModel.DESCRIPTION).errors) {
	$('#description').closest(".form-group").addClass("has-error");
	$('#description').after('<span class="help-block">@error.message</span>');
}
@for(error <- form(StudyModel.DIRNAME_PREFIX).errors) {
	$('#dirName').closest(".form-group").addClass("has-error");
	$('#dirName').after('<span class="help-block">@error.message</span>');
}
@for(error <- form(StudyModel.JSON_DATA).errors) {
	$('#jsonData').closest(".form-group").addClass("has-error");
	$('#jsonData').after('<span class="help-block">@error.message</span>');
}
</script>

}
}
